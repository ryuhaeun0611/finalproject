import streamlit as st

st.set_page_config(
    page_title="숲가꾸기와 산불 피해",
    layout="wide"
)

st.title("🌲 숲가꾸기 활동이 산불 피해에 미치는 영향")

st.markdown("----")

# 1. 한 줄 요약
st.markdown("""
### 🔍 한 줄로 보는 핵심 메시지

**숲가꾸기·조림이 집중된 침엽수 숲 + 건조한 조건**에서는  
임도와 도로를 아무리 많이 깔아도, **대형산불을 막지 못한다**는 것이  
최근 연구들의 공통된 결론입니다.
""")

st.markdown("----")

# 2. 연구 결과 핵심 정리
st.markdown("""
## 1️⃣ 무엇을 근거로 말하나?

### 🧪 연구 1. 강릉 난곡동 대형산불(2023) 사례 분석

- 피해 산림 면적: **약 149ha**
- 피해지 경계 50m 이내 도로 길이: **약 59.6km**  
  → 도로 밀도 **168.9 m/ha (전국 임도 평균의 약 40배 이상)**
- 도로에 의해 쪼개진 숲 **83개 조각**이 모두 **비산(불덩이 날아감)으로 전소**
- 산불 피해의 상당 부분이 **도로에서 50m 이내**에서 발생  
- 도로와 하천(폭 넓은 제방, 4차선 도로 포함)조차  
  **불길을 막는 방화선 역할을 하지 못함**

👉 결론: **도로·임도 밀도를 높여도 대형산불을 효과적으로 막거나 진화하지 못했다.**

---

### 🧪 연구 2. 경상북도 전역(1km 격자) 산불 274건 통계 분석

- 분석 단위: **1km × 1km 격자**
- 산불 발생 여부(발생/비발생)를 로지스틱 회귀로 설명
- 주요 결과:
  - **산림경영 밀도(숲가꾸기·조림 비율)** ↑ →  
    **산불 발생 확률 유의하게 증가**
  - **침엽수 비율, 임분 밀도** ↑ →  
    **산불 발생 위험 강하게 증가**
  - **평균 영급(숲의 나이), 상대습도** ↑ →  
    **산불 위험 감소(억제 요인)**
  - **임도 접근성(임도까지의 평균 거리)**  
    → 산불 발생과 **통계적으로 유의한 관계 없음**

👉 결론:  
- **숲가꾸기·조림이 많이 이루어진 숲일수록** 오히려 **산불에 취약**  
- **임도 접근성**은 “산불을 더 부르지도, 막지도 못한 변수”에 가까움
""")

st.markdown("----")

# 3. 메커니즘 요약
st.markdown("""
## 2️⃣ 왜 이런 일이 벌어질까? (메커니즘)

### 🌿 1. 숲가꾸기 → 하층식생 제거 → 숲의 습기 감소

- 숲가꾸기·조림 과정에서  
  **활엽수 하층식생, 관목, 풀층이 함께 제거**됨
- 원래 이 하층식생은
  - 토양 수분을 붙잡고
  - 그늘을 만들어 **숲 내부 습도 유지**
  - 연료(가지·낙엽)가 **너무 균일하게 연결되지 않도록 완충**
- 하층이 사라지면:
  - 햇빛·바람이 **지면까지 바로 도달**
  - 낙엽·토양이 **빠르게 건조**
  - 같은 기상 조건에서도 **더 잘 타는 숲 구조**가 형성됨

> 👉 **“숲가꾸기 → 습기 완충장치 제거 → 발화·확산에 유리한 숲”**  
> 로 바뀌는 셈입니다.

---

### 🌲 2. 침엽수 편중 + 높은 임분 밀도

- 소나무 위주 숲 + 나무 사이 간격이 촘촘한 구조는
  - 수지와 잎이 **잘 마르고 잘 타는 연료층**을 형성
  - 수관이 이어져 **수관화(위에서 타는 불)** 로 발전하기 쉬움
- 숲가꾸기가 이 구조를 바꾸지 못하면,
  → **“정돈된 고연료 숲”**만 남게 됨

---

### 🛣️ 3. 도로·임도가 왜 방패가 되지 못했나?

- 강릉 난곡 사례에서:
  - 넓은 하천과 4차선 도로, 제방을 **불덩이가 수십~수백 m를 날아 넘어감**
  - 대부분의 피해 숲이 도로에서 매우 가까운 곳에 위치
- 즉, 대형산불·강풍 상황에서는
  - 도로 폭 몇 m로는 **비산을 막기 어렵고**
  - 도로망이 촘촘해도 **피해 강도를 낮춘 증거가 없음**

> 👉 “임도를 더 깔면 산불을 빨리 잡을 수 있다”는 가설은  
> 적어도 현재 데이터에서는 **뒷받침되지 않는다**고 볼 수 있습니다.
""")

st.markdown("----")

# 4. 이 앱에서 볼 내용
st.markdown("""
## 3️⃣ 이 앱에서 무엇을 볼 수 있나? 👀

1. **[산불 피해 시뮬레이션 페이지]**  
   - 가상의 데이터를 이용해  
     **숲가꾸기 밀도, 침엽수 비율, 임분 밀도, 습도, 경사도** 등이  
     산불 피해 면적에 어떤 **방향으로** 영향을 주는지 탐색합니다.
   - 특히,
     - `forest_care_density ↑ → 피해 면적 ↑`
     - `humidity ↑ → 피해 면적 ↓`
     같은 패턴을 **회귀선 + SHAP 분석**으로 확인합니다.

2. **[지역별 산불 피해 클러스터링 페이지]**  
   - 전처리된 `region_df.csv`를 업로드하면,
   - **표준화 + 유클리드 거리 기반 클러스터링**으로
     - 숲가꾸기 강도와 피해가 모두 높은 **고위험군 지역**
     - 숲가꾸기는 적지만 피해가 큰 **예외적 지역**
     - 둘 다 낮은 **저위험군 지역**
     을 시각적으로 구분합니다.

---

👉 왼쪽 **Pages 메뉴**에서  
**② 산불 피해 시뮬레이션**, **③ 지역별 산불 피해 클러스터링**을 차례로 눌러보세요.
""")
